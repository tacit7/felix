<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="phoenix_backend v0.1.0">


    <title>Caching Strategy — phoenix_backend v0.1.0</title>

    <link rel="stylesheet" href="dist/html-elixir-KV3YOVJ3.css" />

    <script defer src="dist/sidebar_items-E7F472ED.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="https://your-domain.com" class="sidebar-projectName" translate="no">
phoenix_backend
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of phoenix_backend</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Caching Strategy</h1>


      <a href="https://github.com/your-org/route-wise-backend/blob/main/docs/caching-strategy.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p>The RouteWise API implements a sophisticated multi-tier caching system designed for high performance, scalability, and fault tolerance. This document explains the caching architecture, backends, and best practices.</p><h2 id="overview" class="section-heading"><a href="#overview" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Overview</span></h2><p>Our caching system provides:</p><ul><li><strong>Multiple Backend Support</strong>: Memory, Redis, and Hybrid configurations</li><li><strong>Intelligent TTL Management</strong>: Context-aware expiration policies</li><li><strong>Fault Tolerance</strong>: Graceful degradation when cache layers fail</li><li><strong>Debug Support</strong>: Comprehensive logging and statistics</li><li><strong>Performance Optimization</strong>: L1/L2 cache promotion and memory pressure management</li></ul><h2 id="architecture" class="section-heading"><a href="#architecture" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Architecture</span></h2><h3 id="cache-layers" class="section-heading"><a href="#cache-layers" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Cache Layers</span></h3><pre><code class="makeup elixir" translate="no"><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="nc">Application</span><span class="w">   </span><span class="err">│</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">│</span><span class="w">  </span><span class="nc">Cache</span><span class="w"> </span><span class="nc">Frontend</span><span class="w">  </span><span class="err">│</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">│</span><span class="w">  </span><span class="nc">Configuration</span><span class="w">  </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
                                </span><span class="err">│</span><span class="w">
            </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
            </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">
    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
    </span><span class="err">│</span><span class="w">   </span><span class="nc">Memory</span><span class="w">    </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">     </span><span class="nc">Redis</span><span class="w">       </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="nc">Hybrid</span><span class="w">    </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="w">  </span><span class="nc">Backend</span><span class="w">    </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">    </span><span class="nc">Backend</span><span class="w">      </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="nc">Backend</span><span class="w">    </span><span class="err">│</span><span class="w">
    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><h3 id="backend-selection" class="section-heading"><a href="#backend-selection" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Backend Selection</span></h3><p>The cache system uses a configurable backend approach:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Development - Fast, local</span><span class="w">
</span><span class="n">config</span><span class="w"> </span><span class="ss">:phoenix_backend</span><span class="p">,</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching</span><span class="p">,</span><span class="w">
  </span><span class="ss">backend</span><span class="p">:</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching.Backend.Memory</span><span class="w">

</span><span class="c1"># Production - Distributed, persistent</span><span class="w">
</span><span class="n">config</span><span class="w"> </span><span class="ss">:phoenix_backend</span><span class="p">,</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching</span><span class="p">,</span><span class="w">
  </span><span class="ss">backend</span><span class="p">:</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching.Backend.Redis</span><span class="w">

</span><span class="c1"># High-performance - Best of both worlds</span><span class="w">
</span><span class="n">config</span><span class="w"> </span><span class="ss">:phoenix_backend</span><span class="p">,</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching</span><span class="p">,</span><span class="w">
  </span><span class="ss">backend</span><span class="p">:</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching.Backend.Hybrid</span></code></pre><h2 id="cache-backends" class="section-heading"><a href="#cache-backends" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Cache Backends</span></h2><h3 id="memory-backend" class="section-heading"><a href="#memory-backend" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Memory Backend</span></h3><p><strong>Purpose</strong>: Fast, local caching for development and single-node deployments.</p><p><strong>Features</strong>:</p><ul><li>In-memory storage using the existing <a href="RouteWiseApi.Cache.html"><code class="inline">RouteWiseApi.Cache</code></a> GenServer</li><li>Process timer-based expiration</li><li>Debug logging for cache operations</li><li>Fault tolerance with error recovery</li><li>Health checking with functional tests</li></ul><p><strong>Use Cases</strong>:</p><ul><li>Development environment</li><li>Single-node applications</li><li>Hot data that needs sub-millisecond access</li></ul><p><strong>Performance</strong>: ~0.1ms average response time</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Example usage</span><span class="w">
</span><span class="nc">RouteWiseApi.Caching.Backend.Memory</span><span class="o">.</span><span class="n">put</span><span class="p" data-group-id="9727622357-1">(</span><span class="s">&quot;user:123&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">user_data</span><span class="p">,</span><span class="w"> </span><span class="mi">300_000</span><span class="p" data-group-id="9727622357-1">)</span><span class="w">  </span><span class="c1"># 5 min TTL</span><span class="w">
</span><span class="p" data-group-id="9727622357-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">user_data</span><span class="p" data-group-id="9727622357-2">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching.Backend.Memory</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="9727622357-3">(</span><span class="s">&quot;user:123&quot;</span><span class="p" data-group-id="9727622357-3">)</span></code></pre><h3 id="redis-backend" class="section-heading"><a href="#redis-backend" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Redis Backend</span></h3><p><strong>Purpose</strong>: Distributed, persistent caching for multi-node production deployments.</p><p><strong>Features</strong>:</p><ul><li>Redis-based distributed caching</li><li>Persistence across application restarts</li><li>Cluster support for high availability</li><li>Pattern-based invalidation</li><li>Production-grade performance</li></ul><p><strong>Use Cases</strong>:</p><ul><li>Production deployments</li><li>Multi-node applications</li><li>Data that needs persistence</li><li>Cross-service caching</li></ul><p><strong>Performance</strong>: ~1-3ms average response time (network dependent)</p><h3 id="hybrid-backend" class="section-heading"><a href="#hybrid-backend" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Hybrid Backend</span></h3><p><strong>Purpose</strong>: Intelligent two-tier caching combining L1 (memory) and L2 (Redis).</p><p><strong>Architecture</strong>:</p><pre><code class="makeup elixir" translate="no"><span class="nc">L1</span><span class="w"> </span><span class="nc">Cache</span><span class="w"> </span><span class="p" data-group-id="2808339300-1">(</span><span class="nc">Memory</span><span class="p" data-group-id="2808339300-1">)</span><span class="w">     </span><span class="nc">L2</span><span class="w"> </span><span class="nc">Cache</span><span class="w"> </span><span class="p" data-group-id="2808339300-2">(</span><span class="nc">Redis</span><span class="p" data-group-id="2808339300-2">)</span><span class="w">
</span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="nc">Hot</span><span class="w"> </span><span class="nc">Data</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="nc">All</span><span class="w"> </span><span class="nc">Data</span><span class="w">       </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="o">&lt;</span><span class="mi">1000</span><span class="w"> </span><span class="n">keys</span><span class="w">     </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="nc">Persistent</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="nc">Fast</span><span class="w"> </span><span class="nc">Access</span><span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="nc">Distributed</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="o">&lt;</span><span class="mi">1</span><span class="n">ms</span><span class="w"> </span><span class="n">latency</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="mi">1</span><span class="o">-</span><span class="mi">3</span><span class="n">ms</span><span class="w"> </span><span class="n">latency</span><span class="w">  </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">   </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><p><strong>Intelligence Features</strong>:</p><ul><li><strong>Automatic Promotion</strong>: L2 → L1 after 3 hits</li><li><strong>Memory Pressure Management</strong>: Smart L1 eviction</li><li><strong>Distributed Invalidation</strong>: PubSub-based cache coherence</li><li><strong>Graceful Degradation</strong>: Continues with single layer if one fails</li></ul><p><strong>Performance</strong>: </p><ul><li>L1 hit: ~0.1ms</li><li>L2 hit with promotion: ~1-3ms</li><li>Cache miss: Variable (depends on data source)</li></ul><h2 id="ttl-configuration" class="section-heading"><a href="#ttl-configuration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">TTL Configuration</span></h2><h3 id="ttl-levels" class="section-heading"><a href="#ttl-levels" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">TTL Levels</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># TTL configuration examples</span><span class="w">
</span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="0529719137-1">(</span><span class="ss">:short</span><span class="p" data-group-id="0529719137-1">)</span><span class="w">   </span><span class="c1"># 5 minutes  - Frequently changing data</span><span class="w">
</span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="0529719137-2">(</span><span class="ss">:medium</span><span class="p" data-group-id="0529719137-2">)</span><span class="w">  </span><span class="c1"># 15 minutes - Moderate update frequency</span><span class="w">
</span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="0529719137-3">(</span><span class="ss">:long</span><span class="p" data-group-id="0529719137-3">)</span><span class="w">    </span><span class="c1"># 1 hour     - Relatively static data</span><span class="w">
</span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="0529719137-4">(</span><span class="ss">:extended</span><span class="p" data-group-id="0529719137-4">)</span><span class="w"> </span><span class="c1"># 24 hours  - Very static data</span></code></pre><h3 id="ttl-strategies-by-data-type" class="section-heading"><a href="#ttl-strategies-by-data-type" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">TTL Strategies by Data Type</span></h3><table><thead><tr><th style="text-align: left;">Data Type</th><th style="text-align: left;">TTL</th><th style="text-align: left;">Backend</th><th style="text-align: left;">Reasoning</th></tr></thead><tbody><tr><td style="text-align: left;"><strong>User Sessions</strong></td><td style="text-align: left;">Short (5m)</td><td style="text-align: left;">Hybrid</td><td style="text-align: left;">Security &amp; state changes</td></tr><tr><td style="text-align: left;"><strong>Google Places</strong></td><td style="text-align: left;">Long (1h)</td><td style="text-align: left;">Hybrid</td><td style="text-align: left;">Static POI data, expensive API calls</td></tr><tr><td style="text-align: left;"><strong>Route Calculations</strong></td><td style="text-align: left;">Medium (15m)</td><td style="text-align: left;">Redis</td><td style="text-align: left;">Traffic changes moderately</td></tr><tr><td style="text-align: left;"><strong>Application Stats</strong></td><td style="text-align: left;">Medium (15m)</td><td style="text-align: left;">Memory</td><td style="text-align: left;">Dashboard performance</td></tr><tr><td style="text-align: left;"><strong>API Rate Limits</strong></td><td style="text-align: left;">Short (5m)</td><td style="text-align: left;">Redis</td><td style="text-align: left;">Need distributed tracking</td></tr></tbody></table><h3 id="context-aware-caching" class="section-heading"><a href="#context-aware-caching" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Context-Aware Caching</span></h3><p>Different contexts use appropriate TTL and backends:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Places - Long TTL, hybrid backend (expensive API calls)</span><span class="w">
</span><span class="nc">RouteWiseApi.Caching.Places</span><span class="o">.</span><span class="n">put_cache</span><span class="p" data-group-id="2828828031-1">(</span><span class="n">place_id</span><span class="p">,</span><span class="w"> </span><span class="n">place_data</span><span class="p">,</span><span class="w"> </span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="2828828031-2">(</span><span class="ss">:long</span><span class="p" data-group-id="2828828031-2">)</span><span class="p" data-group-id="2828828031-1">)</span><span class="w">

</span><span class="c1"># Statistics - Medium TTL, memory backend (frequently accessed)</span><span class="w">
</span><span class="nc">RouteWiseApi.Caching.Statistics</span><span class="o">.</span><span class="n">put_cache</span><span class="p" data-group-id="2828828031-3">(</span><span class="n">stats</span><span class="p">,</span><span class="w"> </span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="2828828031-4">(</span><span class="ss">:medium</span><span class="p" data-group-id="2828828031-4">)</span><span class="p" data-group-id="2828828031-3">)</span><span class="w">

</span><span class="c1"># Trips - Medium TTL, hybrid backend (user-specific, moderately static)</span><span class="w">
</span><span class="nc">RouteWiseApi.Caching.Trips</span><span class="o">.</span><span class="n">put_cache</span><span class="p" data-group-id="2828828031-5">(</span><span class="n">trip_id</span><span class="p">,</span><span class="w"> </span><span class="n">trip_data</span><span class="p">,</span><span class="w"> </span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="2828828031-6">(</span><span class="ss">:medium</span><span class="p" data-group-id="2828828031-6">)</span><span class="p" data-group-id="2828828031-5">)</span></code></pre><h2 id="cache-keys" class="section-heading"><a href="#cache-keys" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Cache Keys</span></h2><h3 id="naming-convention" class="section-heading"><a href="#naming-convention" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Naming Convention</span></h3><pre><code class="makeup elixir" translate="no"><span class="o">&lt;</span><span class="n">domain</span><span class="o">&gt;</span><span class="ss">:&lt;</span><span class="n">identifier</span><span class="o">&gt;</span><span class="p" data-group-id="4014238248-1">[</span><span class="ss">:&lt;</span><span class="n">sub_identifier</span><span class="o">&gt;</span><span class="p" data-group-id="4014238248-1">]</span></code></pre><p>Examples:</p><ul><li><code class="inline">user:123</code> - User data</li><li><code class="inline">place:ChIJd8BlQ2BZwokRAFQEcDL4vOE</code> - Google Place details</li><li><code class="inline">route:37.7749,-122.4194:37.7849,-122.4094</code> - Route calculation</li><li><code class="inline">stats:application</code> - Application statistics</li><li><code class="inline">trips:user:123</code> - User's trips</li></ul><h3 id="key-benefits" class="section-heading"><a href="#key-benefits" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Benefits</span></h3><ul><li><strong>Namespace Separation</strong>: Prevents key collisions</li><li><strong>Pattern Invalidation</strong>: Easy bulk invalidation (<code class="inline">user:*</code>)</li><li><strong>Debugging</strong>: Clear identification of cached data</li><li><strong>TTL Management</strong>: Different TTLs per namespace</li></ul><h2 id="performance-optimization" class="section-heading"><a href="#performance-optimization" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Performance Optimization</span></h2><h3 id="memory-backend-optimization" class="section-heading"><a href="#memory-backend-optimization" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Memory Backend Optimization</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># Efficient key management</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nc">Process</span><span class="w"> </span><span class="n">timers</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">immediate</span><span class="w"> </span><span class="n">expiration</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nc">Periodic</span><span class="w"> </span><span class="n">cleanup</span><span class="w"> </span><span class="p" data-group-id="1781041222-1">(</span><span class="mi">60</span><span class="o">-</span><span class="n">second</span><span class="w"> </span><span class="n">intervals</span><span class="p" data-group-id="1781041222-1">)</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nc">Memory</span><span class="w"> </span><span class="n">pressure</span><span class="w"> </span><span class="n">monitoring</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nc">Graceful</span><span class="w"> </span><span class="n">cleanup</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">expired</span><span class="w"> </span><span class="n">access</span></code></pre><h3 id="hybrid-backend-optimization" class="section-heading"><a href="#hybrid-backend-optimization" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Hybrid Backend Optimization</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># Intelligent promotion algorithm</span><span class="w">
</span><span class="n">hit_threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="c1"># Promote after 3 L2 hits</span><span class="w">
</span><span class="n">memory_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="w">  </span><span class="c1"># Max keys in L1</span><span class="w">

</span><span class="c1"># Promotion logic</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="n">l2_hits</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">hit_threshold</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">l1_keys</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">memory_limit</span><span class="w"> </span><span class="k" data-group-id="1819067786-1">do</span><span class="w">
  </span><span class="n">promote_to_l1</span><span class="p" data-group-id="1819067786-2">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p" data-group-id="1819067786-2">)</span><span class="w">
</span><span class="k" data-group-id="1819067786-1">end</span></code></pre><h3 id="cache-warming" class="section-heading"><a href="#cache-warming" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Cache Warming</span></h3><p>Pre-populate frequently accessed data:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Application startup cache warming</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">warm_cache</span><span class="w"> </span><span class="k" data-group-id="0757772502-1">do</span><span class="w">
  </span><span class="c1"># Pre-load popular places</span><span class="w">
  </span><span class="n">popular_places</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_popular_places</span><span class="p" data-group-id="0757772502-2">(</span><span class="p" data-group-id="0757772502-2">)</span><span class="w">
  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="0757772502-3">(</span><span class="n">popular_places</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cache_place_details</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="0757772502-3">)</span><span class="w">
  
  </span><span class="c1"># Pre-calculate common routes</span><span class="w">
  </span><span class="n">common_routes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_common_routes</span><span class="p" data-group-id="0757772502-4">(</span><span class="p" data-group-id="0757772502-4">)</span><span class="w">
  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="0757772502-5">(</span><span class="n">common_routes</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cache_route_calculation</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="0757772502-5">)</span><span class="w">
</span><span class="k" data-group-id="0757772502-1">end</span></code></pre><h2 id="monitoring-and-debugging" class="section-heading"><a href="#monitoring-and-debugging" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Monitoring and Debugging</span></h2><h3 id="health-checks" class="section-heading"><a href="#health-checks" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Health Checks</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># Backend health verification</span><span class="w">
</span><span class="nc">RouteWiseApi.Caching.Backend.Memory</span><span class="o">.</span><span class="n">health_check</span><span class="p" data-group-id="5625361771-1">(</span><span class="p" data-group-id="5625361771-1">)</span><span class="w">
</span><span class="c1"># =&gt; :ok | {:error, reason}</span><span class="w">

</span><span class="c1"># Comprehensive hybrid health check</span><span class="w">
</span><span class="nc">RouteWiseApi.Caching.Backend.Hybrid</span><span class="o">.</span><span class="n">health_check</span><span class="p" data-group-id="5625361771-2">(</span><span class="p" data-group-id="5625361771-2">)</span><span class="w">
</span><span class="c1"># =&gt; :ok (both layers healthy)</span><span class="w">
</span><span class="c1"># =&gt; :ok (one layer degraded but functional)</span><span class="w">
</span><span class="c1"># =&gt; {:error, :all_backends_unhealthy}</span></code></pre><h3 id="statistics-and-monitoring" class="section-heading"><a href="#statistics-and-monitoring" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Statistics and Monitoring</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># Memory backend stats</span><span class="w">
</span><span class="p" data-group-id="6756951046-1">%{</span><span class="w">
  </span><span class="ss">total_keys</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
  </span><span class="ss">expired_keys</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="ss">active_timers</span><span class="p">:</span><span class="w"> </span><span class="mi">145</span><span class="p">,</span><span class="w">
  </span><span class="ss">backend</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;memory&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">health_status</span><span class="p">:</span><span class="w"> </span><span class="ss">:healthy</span><span class="w">
</span><span class="p" data-group-id="6756951046-1">}</span><span class="w">

</span><span class="c1"># Hybrid backend stats</span><span class="w">
</span><span class="p" data-group-id="6756951046-2">%{</span><span class="w">
  </span><span class="ss">backend</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hybrid&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">l1_stats</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6756951046-3">%{</span><span class="ss">total_keys</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="ss">health_status</span><span class="p">:</span><span class="w"> </span><span class="ss">:healthy</span><span class="p" data-group-id="6756951046-3">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">l2_stats</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6756951046-4">%{</span><span class="ss">total_keys</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="ss">health_status</span><span class="p">:</span><span class="w"> </span><span class="ss">:healthy</span><span class="p" data-group-id="6756951046-4">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">hit_tracking</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6756951046-5">%{</span><span class="s">&quot;user:123&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;place:abc&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="6756951046-5">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">health_status</span><span class="p">:</span><span class="w"> </span><span class="ss">:healthy</span><span class="w">
</span><span class="p" data-group-id="6756951046-2">}</span></code></pre><h3 id="debug-logging" class="section-heading"><a href="#debug-logging" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Debug Logging</span></h3><p>Enable debug logging to track cache behavior:</p><pre><code class="makeup elixir" translate="no"><span class="n">config</span><span class="w"> </span><span class="ss">:phoenix_backend</span><span class="p">,</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching</span><span class="p">,</span><span class="w">
  </span><span class="ss">enable_logging</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">debug_mode</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">

</span><span class="c1"># Log output examples:</span><span class="w">
</span><span class="c1"># [debug] Cache HIT: user:123</span><span class="w">
</span><span class="c1"># [debug] Cache MISS: user:456</span><span class="w">
</span><span class="c1"># [debug] Promoted place:abc to L1 cache after 3 hits</span><span class="w">
</span><span class="c1"># [debug] Cache PUT: route:coordinates (TTL: 900000ms)</span></code></pre><h2 id="best-practices" class="section-heading"><a href="#best-practices" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Best Practices</span></h2><h3 id="1-choose-appropriate-ttls" class="section-heading"><a href="#1-choose-appropriate-ttls" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">1. Choose Appropriate TTLs</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># ✅ Good: Match TTL to data characteristics</span><span class="w">
</span><span class="n">user_profile_ttl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="6292403877-1">(</span><span class="ss">:medium</span><span class="p" data-group-id="6292403877-1">)</span><span class="w">    </span><span class="c1"># Updates occasionally</span><span class="w">
</span><span class="n">api_rate_limit_ttl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="6292403877-2">(</span><span class="ss">:short</span><span class="p" data-group-id="6292403877-2">)</span><span class="w">   </span><span class="c1"># Updates frequently</span><span class="w">
</span><span class="n">poi_data_ttl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="6292403877-3">(</span><span class="ss">:long</span><span class="p" data-group-id="6292403877-3">)</span><span class="w">          </span><span class="c1"># Updates rarely</span><span class="w">

</span><span class="c1"># ❌ Bad: One-size-fits-all TTL</span><span class="w">
</span><span class="n">everything_ttl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Config</span><span class="o">.</span><span class="n">ttl</span><span class="p" data-group-id="6292403877-4">(</span><span class="ss">:medium</span><span class="p" data-group-id="6292403877-4">)</span></code></pre><h3 id="2-handle-cache-failures-gracefully" class="section-heading"><a href="#2-handle-cache-failures-gracefully" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">2. Handle Cache Failures Gracefully</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># ✅ Good: Graceful degradation</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">get_user_data</span><span class="p" data-group-id="0216129072-1">(</span><span class="n">user_id</span><span class="p" data-group-id="0216129072-1">)</span><span class="w"> </span><span class="k" data-group-id="0216129072-2">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">Cache</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="0216129072-3">(</span><span class="s">&quot;user:</span><span class="si" data-group-id="0216129072-4">#{</span><span class="n">user_id</span><span class="si" data-group-id="0216129072-4">}</span><span class="s">&quot;</span><span class="p" data-group-id="0216129072-3">)</span><span class="w"> </span><span class="k" data-group-id="0216129072-5">do</span><span class="w">
    </span><span class="p" data-group-id="0216129072-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p" data-group-id="0216129072-6">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> 
      </span><span class="p" data-group-id="0216129072-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p" data-group-id="0216129072-7">}</span><span class="w">
    </span><span class="ss">:error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> 
      </span><span class="c1"># Fallback to database</span><span class="w">
      </span><span class="n">fetch_and_cache_user</span><span class="p" data-group-id="0216129072-8">(</span><span class="n">user_id</span><span class="p" data-group-id="0216129072-8">)</span><span class="w">
  </span><span class="k" data-group-id="0216129072-5">end</span><span class="w">
</span><span class="k" data-group-id="0216129072-2">end</span><span class="w">

</span><span class="c1"># ❌ Bad: Cache dependency</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">get_user_data</span><span class="p" data-group-id="0216129072-9">(</span><span class="n">user_id</span><span class="p" data-group-id="0216129072-9">)</span><span class="w"> </span><span class="k" data-group-id="0216129072-10">do</span><span class="w">
  </span><span class="nc">Cache</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="0216129072-11">(</span><span class="s">&quot;user:</span><span class="si" data-group-id="0216129072-12">#{</span><span class="n">user_id</span><span class="si" data-group-id="0216129072-12">}</span><span class="s">&quot;</span><span class="p" data-group-id="0216129072-11">)</span><span class="w">  </span><span class="c1"># Fails if cache unavailable</span><span class="w">
</span><span class="k" data-group-id="0216129072-10">end</span></code></pre><h3 id="3-use-structured-cache-keys" class="section-heading"><a href="#3-use-structured-cache-keys" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">3. Use Structured Cache Keys</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># ✅ Good: Structured, predictable keys</span><span class="w">
</span><span class="s">&quot;user:</span><span class="si" data-group-id="6468086296-1">#{</span><span class="n">user_id</span><span class="si" data-group-id="6468086296-1">}</span><span class="s">:profile&quot;</span><span class="w">
</span><span class="s">&quot;place:</span><span class="si" data-group-id="6468086296-2">#{</span><span class="n">place_id</span><span class="si" data-group-id="6468086296-2">}</span><span class="s">:details&quot;</span><span class="w">
</span><span class="s">&quot;route:</span><span class="si" data-group-id="6468086296-3">#{</span><span class="n">origin</span><span class="si" data-group-id="6468086296-3">}</span><span class="s">:</span><span class="si" data-group-id="6468086296-4">#{</span><span class="n">destination</span><span class="si" data-group-id="6468086296-4">}</span><span class="s">:</span><span class="si" data-group-id="6468086296-5">#{</span><span class="n">mode</span><span class="si" data-group-id="6468086296-5">}</span><span class="s">&quot;</span><span class="w">

</span><span class="c1"># ❌ Bad: Unstructured keys</span><span class="w">
</span><span class="s">&quot;user_profile_123&quot;</span><span class="w">
</span><span class="s">&quot;some_place_data&quot;</span><span class="w">
</span><span class="s">&quot;route_calculation_result&quot;</span></code></pre><h3 id="4-implement-cache-invalidation" class="section-heading"><a href="#4-implement-cache-invalidation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">4. Implement Cache Invalidation</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># ✅ Good: Proactive invalidation</span><span class="w">
</span><span class="kd">def</span><span class="w"> </span><span class="nf">update_user_profile</span><span class="p" data-group-id="0880912828-1">(</span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">new_data</span><span class="p" data-group-id="0880912828-1">)</span><span class="w"> </span><span class="k" data-group-id="0880912828-2">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">Accounts</span><span class="o">.</span><span class="n">update_user</span><span class="p" data-group-id="0880912828-3">(</span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">new_data</span><span class="p" data-group-id="0880912828-3">)</span><span class="w"> </span><span class="k" data-group-id="0880912828-4">do</span><span class="w">
    </span><span class="p" data-group-id="0880912828-5">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p" data-group-id="0880912828-5">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="c1"># Invalidate related cache entries</span><span class="w">
      </span><span class="nc">Cache</span><span class="o">.</span><span class="n">delete</span><span class="p" data-group-id="0880912828-6">(</span><span class="s">&quot;user:</span><span class="si" data-group-id="0880912828-7">#{</span><span class="n">user_id</span><span class="si" data-group-id="0880912828-7">}</span><span class="s">:profile&quot;</span><span class="p" data-group-id="0880912828-6">)</span><span class="w">
      </span><span class="nc">Cache</span><span class="o">.</span><span class="n">invalidate_pattern</span><span class="p" data-group-id="0880912828-8">(</span><span class="s">&quot;user:</span><span class="si" data-group-id="0880912828-9">#{</span><span class="n">user_id</span><span class="si" data-group-id="0880912828-9">}</span><span class="s">:*&quot;</span><span class="p" data-group-id="0880912828-8">)</span><span class="w">
      </span><span class="p" data-group-id="0880912828-10">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p" data-group-id="0880912828-10">}</span><span class="w">
    </span><span class="n">error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">error</span><span class="w">
  </span><span class="k" data-group-id="0880912828-4">end</span><span class="w">
</span><span class="k" data-group-id="0880912828-2">end</span></code></pre><h2 id="troubleshooting" class="section-heading"><a href="#troubleshooting" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Troubleshooting</span></h2><h3 id="common-issues" class="section-heading"><a href="#common-issues" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Common Issues</span></h3><ol><li><strong>Cache Misses</strong>: Check TTL settings and key naming</li><li><strong>Memory Growth</strong>: Monitor cleanup intervals and expired key handling</li><li><strong>Redis Connection</strong>: Verify Redis server availability and network connectivity</li><li><strong>Performance</strong>: Use hybrid backend for optimal L1/L2 balance</li></ol><h3 id="debug-commands" class="section-heading"><a href="#debug-commands" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Debug Commands</span></h3><pre><code class="makeup elixir" translate="no"><span class="c1"># Check cache health</span><span class="w">
</span><span class="nc">RouteWiseApi.Caching.Backend.Memory</span><span class="o">.</span><span class="n">health_check</span><span class="p" data-group-id="4285823024-1">(</span><span class="p" data-group-id="4285823024-1">)</span><span class="w">

</span><span class="c1"># View cache statistics</span><span class="w">
</span><span class="nc">RouteWiseApi.Caching.Backend.Memory</span><span class="o">.</span><span class="n">stats</span><span class="p" data-group-id="4285823024-2">(</span><span class="p" data-group-id="4285823024-2">)</span><span class="w">

</span><span class="c1"># Test cache functionality</span><span class="w">
</span><span class="nc">Cache</span><span class="o">.</span><span class="n">put</span><span class="p" data-group-id="4285823024-3">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">5000</span><span class="p" data-group-id="4285823024-3">)</span><span class="w">
</span><span class="nc">Cache</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="4285823024-4">(</span><span class="s">&quot;test&quot;</span><span class="p" data-group-id="4285823024-4">)</span><span class="w">  </span><span class="c1"># Should return {:ok, &quot;value&quot;}</span></code></pre><h2 id="configuration-examples" class="section-heading"><a href="#configuration-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Configuration Examples</span></h2><h3 id="development-configuration" class="section-heading"><a href="#development-configuration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Development Configuration</span></h3><pre><code class="makeup elixir" translate="no"><span class="n">config</span><span class="w"> </span><span class="ss">:phoenix_backend</span><span class="p">,</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching</span><span class="p">,</span><span class="w">
  </span><span class="ss">backend</span><span class="p">:</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching.Backend.Memory</span><span class="p">,</span><span class="w">
  </span><span class="ss">enable_logging</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">debug_mode</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">ttl_multiplier</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="w">  </span><span class="c1"># Shorter TTLs for development</span></code></pre><h3 id="production-configuration" class="section-heading"><a href="#production-configuration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Production Configuration</span></h3><pre><code class="makeup elixir" translate="no"><span class="n">config</span><span class="w"> </span><span class="ss">:phoenix_backend</span><span class="p">,</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching</span><span class="p">,</span><span class="w">
  </span><span class="ss">backend</span><span class="p">:</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching.Backend.Hybrid</span><span class="p">,</span><span class="w">
  </span><span class="ss">enable_logging</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w">
  </span><span class="ss">debug_mode</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w">
  </span><span class="ss">ttl_multiplier</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
  </span><span class="ss">invalidation</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9846218084-1">[</span><span class="w">
    </span><span class="ss">distributed</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
    </span><span class="ss">pubsub_server</span><span class="p">:</span><span class="w"> </span><span class="nc">RouteWiseApi.PubSub</span><span class="w">
  </span><span class="p" data-group-id="9846218084-1">]</span></code></pre><h3 id="testing-configuration" class="section-heading"><a href="#testing-configuration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Testing Configuration</span></h3><pre><code class="makeup elixir" translate="no"><span class="n">config</span><span class="w"> </span><span class="ss">:phoenix_backend</span><span class="p">,</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching</span><span class="p">,</span><span class="w">
  </span><span class="ss">backend</span><span class="p">:</span><span class="w"> </span><span class="nc">RouteWiseApi.Caching.Backend.Memory</span><span class="p">,</span><span class="w">
  </span><span class="ss">enable_logging</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w">
  </span><span class="ss">debug_mode</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w">
  </span><span class="ss">ttl_multiplier</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="w">  </span><span class="c1"># Very short TTLs for fast tests</span></code></pre><p>This caching strategy provides the foundation for a high-performance, scalable API while maintaining simplicity in development and robustness in production.</p>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="readme.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
RouteWise API
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="phoenix_backend.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
